{% extends "base.html" %}
{% load static %}

{% block content %}

<h2 class="mb-3">{{ word_list.name }}</h2>

<!-- ФИЛЬТРЫ И ПОИСК -->
<div class="mb-3 d-flex gap-3 flex-wrap align-items-center">

    <input type="text"
           id="word-search"
           class="form-control"
           placeholder="Поиск слова..."
           style="max-width: 300px;">

    <div class="form-check">
        <input class="form-check-input"
               type="checkbox"
               id="filter-hide-known">
        <label class="form-check-label">
            Скрыть выученные
        </label>
    </div>

    <div class="form-check">
        <input class="form-check-input"
               type="checkbox"
               id="filter-only-known">
        <label class="form-check-label">
            Только выученные
        </label>
    </div>

</div>

<table class="table table-striped align-middle">
    <thead>
        <tr>
            <th>Слово</th>
            <th>Транскрипция</th>
            <th>Часть речи</th>
            <th>Перевод</th>
        </tr>
    </thead>
    <tbody>

    {% for word in words %}
    <tr class="word-card"
        data-word="{{ word.name|lower }}"
        data-known="{{ word.is_known|yesno:'1,0' }}">

        <td>{{ word.name }}</td>
        <td>{{ word.transcription }}</td>

        <td>
            <select class="part-select form-select">
                {% for part in word.parts_of_speech.all %}
                    <option value="{{ part.id }}"
                            {% if part.is_main %}selected{% endif %}>
                        {{ part.name }}
                    </option>
                {% endfor %}
            </select>
        </td>

        <td>
            <select class="translation-select form-select"></select>

            {% for part in word.parts_of_speech.all %}
            <div class="translations-data"
                 data-part-id="{{ part.id }}"
                 style="display:none;">
                {% for tr in part.translations.all %}
                    <span
                        data-id="{{ tr.id }}"
                        data-is-main="{{ tr.is_main|yesno:'1,0' }}">
                        {{ tr.translation }}
                    </span>
                {% endfor %}
            </div>
            {% endfor %}
        </td>

    </tr>
    {% endfor %}

    </tbody>
</table>

{% endblock %}

{% block extra_js %}
<script src="{% static 'lists/js/words.js' %}"></script>
{% endblock %}
